<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      async function createDiscount() {
        const url = "https://ferdy-globals.myshopify.com/admin/discounts.json";
        const headers = {
          "Content-Type": "application/json",
          "X-Shopify-Access-Token": "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",
          "Access-Control-Allow-Origin": "/*",
        };
        const data = {
          discount: {
            code: "JoshTest1337",
            value: "10.00",
            value_type: "percentage",
            starts_at: "2022-01-01T00:00:00Z",
            ends_at: "2023-12-31T23:59:59Z",
            usage_limit: null,
            applies_to_id: null,
            applies_to_resource: "customer",
            applies_once: false,
            applies_once_per_customer: false,
            applies_to_all_items: true,
          },
        };

        try {
          const response = await fetch(url, {
            method: "POST",
            headers: headers,
            body: JSON.stringify(data),
          });
          const responseJson = await response.json();

          return [
            {
              id: responseJson.discount.id,
              code: responseJson.discount.code,
              value: responseJson.discount.value,
              value_type: responseJson.discount.value_type,
              starts_at: responseJson.discount.starts_at,
              ends_at: responseJson.discount.ends_at,
              applies_to_resource: responseJson.discount.applies_to_resource,
              applies_to_all_items: responseJson.discount.applies_to_all_items,
            },
          ];
        } catch (error) {
            console.log(error)
        }
      }

      createDiscount();
    </script>
  </body>
</html>
